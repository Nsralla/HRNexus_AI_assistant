# HR Nexus - AI-Powered HR Assistant

An intelligent HR assistant powered by LLMs, RAG (Retrieval-Augmented Generation), and LangGraph for advanced agentic workflows. The system provides real-time HR support with access to company documentation, employee data, and web search capabilities.

## ğŸ¯ Overview

HR Nexus is a comprehensive AI assistant that helps employees and HR staff with:
- **Intelligent Q&A** about company policies and procedures
- **Employee Information** lookup and queries
- **Real-time Web Search** for up-to-date information
- **Custom Document Upload** to expand the knowledge base
- **Multi-tenant Architecture** for multiple companies
- **Conversational Memory** for context-aware responses

## âœ¨ Key Features

### ğŸ¤– AI & LLM Capabilities
- **Advanced RAG Pipeline** with ChromaDB vector database
- **LangGraph Agentic Workflows** for multi-step reasoning
- **CrewAI Agents** for specialized task handling
- **OpenAI GPT-4** integration for intelligent responses
- **Cohere Embeddings** for semantic search
- **Streaming Responses** for real-time chat experience

### ğŸ’¬ Chat & Conversation
- **Multi-turn Conversations** with persistent chat history
- **Context-aware Responses** using conversation history
- **Streaming Support** for token-by-token responses
- **Chat Management** (create, list, delete conversations)
- **Auto-naming** chats based on first message

### ğŸ“š Knowledge Base & RAG
- **Document Upload** - Upload and embed custom documents (.txt, .md, .json, .csv, .pdf)
- **Vector Search** across all company documentation
- **Markdown Documentation** support for policies and guides
- **JSON Data Integration** for structured information
- **Real-time Web Search** via Tavily API
- **Semantic Search** with Cohere embeddings

### ğŸ” Authentication & Security
- **JWT Token Authentication** with secure password hashing (bcrypt)
- **Multi-tenant Architecture** with company isolation
- **Role-based Access Control** 
- **Session Management** with automatic token refresh
- **Secure API Endpoints** with authentication middleware

### ğŸ“Š Data Management
- **PostgreSQL Database** (Supabase) for structured data
- **Employee Information** queries and management
- **Project & Sprint Tracking** integration
- **Jira Tickets** access and querying
- **Meeting Notes** retrieval
- **Service & Deployment** information

### ğŸ¨ User Interface
- **Modern React UI** with Tailwind CSS
- **Responsive Design** for mobile and desktop
- **Dark Theme** sidebar with chat history
- **Animated Components** using Framer Motion
- **Guide Cards** for new users
- **File Upload Modal** with drag & drop
- **Real-time Upload Progress** tracking
- **Error Handling** with user-friendly messages

### ğŸ”§ Developer Features
- **FastAPI Backend** with automatic API documentation
- **OpenAPI/Swagger** documentation at `/docs`
- **Modular Architecture** for easy extension
- **MCP (Model Context Protocol)** support
- **Comprehensive Logging** for debugging
- **Type Safety** with TypeScript (frontend) and Pydantic (backend)

## ğŸ—ï¸ Tech Stack

### Frontend
- **React 18** with TypeScript
- **Vite** for fast development and building
- **Tailwind CSS** for styling
- **Framer Motion** for animations
- **React Router** for navigation
- **Axios** for API requests

### Backend
- **FastAPI** (Python 3.10+)
- **SQLAlchemy** ORM with PostgreSQL
- **LangChain** for LLM orchestration
- **LangGraph** for agentic workflows
- **CrewAI** for multi-agent systems
- **ChromaDB** for vector embeddings
- **Cohere** for embeddings
- **OpenAI GPT-4** for chat
- **Tavily** for web search
- **JWT** authentication with python-jose
- **Bcrypt** for password hashing

### Infrastructure
- **PostgreSQL** (Supabase) for data storage
- **ChromaDB** for vector embeddings (local)
- **Cohere API** for embeddings
- **OpenAI API** for LLM
- **Tavily API** for web search

## ğŸ“Š System Architecture & Workflow

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FRONTEND (React + TypeScript)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chat Interfaceâ”‚  â”‚Document Uploadâ”‚  â”‚ Auth Pages   â”‚  â”‚Landing Page â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                â”‚                 â”‚                  â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                 â”‚                  â”‚
           â”‚     WebSocket  â”‚  HTTP POST      â”‚   HTTP POST      â”‚
           â”‚     (Streaming)â”‚                 â”‚                  â”‚
           â–¼                â–¼                 â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND (FastAPI)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         API ROUTERS                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Auth   â”‚  â”‚  Chat  â”‚  â”‚  Documents   â”‚  â”‚   Health Check  â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚           â”‚              â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     CHAT PIPELINE (LangGraph)                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â•‘         INTENT CLASSIFICATION NODE                â•‘  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â•‘  Model: mistralai/ministral-8b (Fast)            â•‘  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â•‘  Determines query type: conversation |            â•‘  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â•‘  documentation | data_query | web_search         â•‘  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                 â”‚                                â”‚   â”‚
â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚        â”‚                        â”‚                        â”‚      â”‚   â”‚
â”‚  â”‚        â–¼                        â–¼                        â–¼      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚  â”‚CONVERSATION â”‚      â”‚  DOCUMENTATION   â”‚      â”‚DATA_QUERY  â”‚â”‚   â”‚
â”‚  â”‚  â”‚    NODE     â”‚      â”‚      NODE        â”‚      â”‚   NODE     â”‚â”‚   â”‚
â”‚  â”‚  â”‚             â”‚      â”‚                  â”‚      â”‚            â”‚â”‚   â”‚
â”‚  â”‚  â”‚Uses: GPT-4  â”‚      â”‚  Uses: GPT-4 +   â”‚      â”‚Uses: GPT-4 â”‚â”‚   â”‚
â”‚  â”‚  â”‚for casual   â”‚      â”‚  ChromaDB RAG    â”‚      â”‚  + Tools   â”‚â”‚   â”‚
â”‚  â”‚  â”‚conversation â”‚      â”‚  for policies    â”‚      â”‚  for data  â”‚â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚        â–¼                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚              WEB SEARCH NODE                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Tavily API: Real-time web search                   â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Returns: 5 sources with content & URLs             â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Model: GPT-4 synthesizes answer with citations     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                 â”‚                                â”‚   â”‚
â”‚  â”‚                                 â–¼                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚          âš™ï¸ CREWAI RESPONSE FORMATTER AGENT              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Role: Post-processing & Formatting Specialist     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Model: mistralai/ministral-8b                     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Tools:                                             â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  1. create_summary_tool                            â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚     - Summarizes long responses (50-200 words)     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚     - Preserves key information                    â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  2. format_response_tool                           â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚     - Structures response with markdown            â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚     - Adds headers, bullets, sections              â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚     - Professional HR-friendly formatting          â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Task: Format LangGraph output for readability     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                 â”‚                                â”‚   â”‚
â”‚  â”‚                                 â–¼                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚         STREAMING RESPONSE TO FRONTEND                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Token-by-token delivery via Server-Sent Events          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               SERVICES & DATA SOURCES                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ChromaDB   â”‚  â”‚Document      â”‚  â”‚  Data Services:         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Vector DB  â”‚  â”‚Processor     â”‚  â”‚  - Employees            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚              â”‚  â”‚  - Projects             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚Embeddings:  â”‚  â”‚Chunking &    â”‚  â”‚  - JIRA Tickets         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚- Policies   â”‚  â”‚Embedding     â”‚  â”‚  - Meetings             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚- Docs       â”‚  â”‚for uploads   â”‚  â”‚  - Sprints              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚- Uploaded   â”‚  â”‚              â”‚  â”‚  - Deployments          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Files      â”‚  â”‚              â”‚  â”‚  - Services             â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    DATABASE (PostgreSQL/Supabase)                 â”‚  â”‚
â”‚  â”‚  Tables: users | companies | chats | messages |                  â”‚  â”‚
â”‚  â”‚          message_feedback | documents                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Detailed LangGraph Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER QUERY                                  â”‚
â”‚                        "Who is on the backend team?"                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STEP 1: INTENT CLASSIFICATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Model: mistralai/ministral-8b (Fast & Efficient)                       â”‚
â”‚                                                                           â”‚
â”‚  Prompt: Analyze query + conversation history                           â”‚
â”‚  Output: "data_query" (employee information lookup)                     â”‚
â”‚                                                                           â”‚
â”‚  Intent Types:                                                           â”‚
â”‚  â€¢ conversation  â†’ Greetings, casual chat                               â”‚
â”‚  â€¢ documentation â†’ Policy/procedure questions                           â”‚
â”‚  â€¢ data_query    â†’ Employee/project/sprint lookups âœ“                    â”‚
â”‚  â€¢ web_search    â†’ Current events, latest information                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   ROUTING    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STEP 2: DATA QUERY NODE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Model: x-ai/grok-2-1212 (GPT-4 equivalent)                             â”‚
â”‚                                                                           â”‚
â”‚  Process:                                                                â”‚
â”‚  1. LLM receives query + bound tools                                     â”‚
â”‚  2. LLM decides: search_emps_by_key_tool                                â”‚
â”‚  3. Tool args: {key: "team", value: "backend", operator: "equals"}      â”‚
â”‚  4. Execute tool â†’ Returns JSON data                                    â”‚
â”‚  5. LLM synthesizes response from tool results                          â”‚
â”‚                                                                           â”‚
â”‚  Available Tools:                                                        â”‚
â”‚  â€¢ search_emps_by_key_tool      (Employees)                             â”‚
â”‚  â€¢ search_jira_tickets_tool     (JIRA tickets)                          â”‚
â”‚  â€¢ search_projects_tool         (Projects)                              â”‚
â”‚  â€¢ search_sprints_tool          (Sprints)                               â”‚
â”‚  â€¢ search_deployments_tool      (Deployments)                           â”‚
â”‚  â€¢ search_meetings_tool         (Meetings)                              â”‚
â”‚  â€¢ search_services_tool         (Services)                              â”‚
â”‚                                                                           â”‚
â”‚  Raw Output (Markdown):                                                  â”‚
â”‚  # Backend Team Members                                                  â”‚
â”‚  ## 1. Ahmed Ali                                                         â”‚
â”‚  - Role: Backend Lead                                                    â”‚
â”‚  - Email: ahmed@harri.com                                                â”‚
â”‚  ...                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 3: CREWAI RESPONSE FORMATTER (Optional)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Agent: Response Formatter & Summarizer                                 â”‚
â”‚  Model: mistralai/ministral-8b                                          â”‚
â”‚                                                                           â”‚
â”‚  Configuration (agent_config.yaml):                                     â”‚
â”‚    role: "Response Formatter and Summarizer"                            â”‚
â”‚    goal: "Format and enhance LangGraph outputs for clarity"             â”‚
â”‚    backstory: "HR communication specialist with markdown expertise"     â”‚
â”‚    tools: [create_summary, format_response]                             â”‚
â”‚                                                                           â”‚
â”‚  Process Flow:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. RECEIVE: Raw LangGraph output (markdown)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. ANALYZE: Content length and structure                        â”‚   â”‚
â”‚  â”‚    â€¢ If > 500 words â†’ Use create_summary_tool                   â”‚   â”‚
â”‚  â”‚    â€¢ Always â†’ Use format_response_tool                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. APPLY TOOLS:                                                  â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ğŸ”§ create_summary_tool:                                       â”‚   â”‚
â”‚  â”‚       Input: Full markdown response                              â”‚   â”‚
â”‚  â”‚       Output: Concise 50-200 word summary                        â”‚   â”‚
â”‚  â”‚       Preserves: Key facts, names, numbers                       â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ğŸ¨ format_response_tool:                                      â”‚   â”‚
â”‚  â”‚       Input: Summary or full text                                â”‚   â”‚
â”‚  â”‚       Output: Well-structured markdown with:                     â”‚   â”‚
â”‚  â”‚         â€¢ Clear headers (H1, H2, H3)                             â”‚   â”‚
â”‚  â”‚         â€¢ Bullet points for lists                                â”‚   â”‚
â”‚  â”‚         â€¢ Numbered sections                                      â”‚   â”‚
â”‚  â”‚         â€¢ Bold for emphasis                                      â”‚   â”‚
â”‚  â”‚         â€¢ Tables for data                                        â”‚   â”‚
â”‚  â”‚         â€¢ Horizontal rules for separation                        â”‚   â”‚
â”‚  â”‚         â€¢ Professional HR tone                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4. ENHANCED OUTPUT:                                              â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    # Backend Team Overview                                       â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    **3 team members** found on the backend team:                â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ## Team Members                                               â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ### 1. Ahmed Ali - Backend Lead                              â”‚   â”‚
â”‚  â”‚    - ğŸ“§ Email: ahmed@harri.com                                   â”‚   â”‚
â”‚  â”‚    - ğŸ’¬ Slack: @ahmed.ali                                        â”‚   â”‚
â”‚  â”‚    - ğŸ¢ Location: Amman, Jordan                                  â”‚   â”‚
â”‚  â”‚    - â­ Experience: 8 years                                       â”‚   â”‚
â”‚  â”‚    - ğŸ› ï¸ Skills: Python, Django, PostgreSQL, Redis, Docker       â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ---                                                            â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚    ### 2. Khaled Mansour - Backend Engineer                     â”‚   â”‚
â”‚  â”‚    ...                                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 4: STREAM TO FRONTEND                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Server-Sent Events (SSE)                                              â”‚
â”‚  â€¢ Token-by-token streaming                                              â”‚
â”‚  â€¢ Real-time display in chat UI                                          â”‚
â”‚  â€¢ Markdown rendered with ReactMarkdown                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CrewAI Agent Details

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            CREWAI RESPONSE FORMATTER AGENT ARCHITECTURE                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT CONFIGURATION (agent_config.yaml)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  agents:                                                             â”‚
â”‚    response_formatter_agent:                                         â”‚
â”‚      role: "Response Formatter and Summarizer"                      â”‚
â”‚      goal: "Format and summarize langgraph outputs for clarity"     â”‚
â”‚      backstory: |                                                    â”‚
â”‚        You are an expert HR communication specialist. Your role is  â”‚
â”‚        to take technical outputs from the LangGraph pipeline and    â”‚
â”‚        transform them into clear, professional, well-structured     â”‚
â”‚        responses that are easy to read and understand.              â”‚
â”‚      tools:                                                          â”‚
â”‚        - create_summary                                              â”‚
â”‚        - format_response                                             â”‚
â”‚      verbose: true                                                   â”‚
â”‚      allow_delegation: false                                         â”‚
â”‚      max_iter: 3                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TOOL 1: create_summary_tool                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Purpose: Condense long responses while preserving key info         â”‚
â”‚                                                                       â”‚
â”‚  Input:                                                              â”‚
â”‚    - Full LangGraph output (potentially long markdown)              â”‚
â”‚                                                                       â”‚
â”‚  Process:                                                            â”‚
â”‚    1. Extract key information (names, numbers, facts)               â”‚
â”‚    2. Identify main points and conclusions                          â”‚
â”‚    3. Remove redundant details                                      â”‚
â”‚    4. Maintain professional tone                                    â”‚
â”‚                                                                       â”‚
â”‚  Output:                                                             â”‚
â”‚    - Concise summary (50-200 words)                                 â”‚
â”‚    - Preserves all critical information                             â”‚
â”‚    - Easy to scan and understand                                    â”‚
â”‚                                                                       â”‚
â”‚  Example:                                                            â”‚
â”‚    Input: 800-word detailed employee breakdown                      â”‚
â”‚    Output: 150-word summary highlighting key team members           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TOOL 2: format_response_tool                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Purpose: Structure response with professional markdown formatting  â”‚
â”‚                                                                       â”‚
â”‚  Input:                                                              â”‚
â”‚    - Raw or summarized text                                         â”‚
â”‚                                                                       â”‚
â”‚  Formatting Applied:                                                 â”‚
â”‚    âœ“ Headers: # H1, ## H2, ### H3                                   â”‚
â”‚    âœ“ Lists: - Bullets, 1. Numbered                                  â”‚
â”‚    âœ“ Emphasis: **Bold**, *Italic*                                   â”‚
â”‚    âœ“ Code: `inline code`, ```code blocks```                         â”‚
â”‚    âœ“ Links: [Text](URL) for citations                               â”‚
â”‚    âœ“ Tables: For structured data                                    â”‚
â”‚    âœ“ Horizontal Rules: --- for sections                             â”‚
â”‚    âœ“ Blockquotes: > For important notes                             â”‚
â”‚    âœ“ Emojis: For visual clarity (optional)                          â”‚
â”‚                                                                       â”‚
â”‚  Best Practices:                                                     â”‚
â”‚    â€¢ Clear hierarchy with headers                                   â”‚
â”‚    â€¢ Bullet points for lists                                        â”‚
â”‚    â€¢ Bold for key terms                                             â”‚
â”‚    â€¢ Consistent spacing                                             â”‚
â”‚    â€¢ Professional HR tone                                           â”‚
â”‚                                                                       â”‚
â”‚  Output:                                                             â”‚
â”‚    - Well-structured markdown                                       â”‚
â”‚    - Easy to read and scan                                          â”‚
â”‚    - Professional appearance                                        â”‚
â”‚    - Ready for frontend rendering                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREW EXECUTION FLOW                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  1. CREATE TASK:                                                     â”‚
â”‚     task = Task(                                                     â”‚
â”‚         description="Format this response...",                       â”‚
â”‚         agent=response_formatter_agent,                              â”‚
â”‚         expected_output="Well-formatted markdown"                    â”‚
â”‚     )                                                                â”‚
â”‚                                                                       â”‚
â”‚  2. CREATE CREW:                                                     â”‚
â”‚     crew = Crew(                                                     â”‚
â”‚         agents=[response_formatter_agent],                           â”‚
â”‚         tasks=[task],                                                â”‚
â”‚         verbose=True                                                 â”‚
â”‚     )                                                                â”‚
â”‚                                                                       â”‚
â”‚  3. EXECUTE:                                                         â”‚
â”‚     result = crew.kickoff()                                          â”‚
â”‚                                                                       â”‚
â”‚  4. AGENT REASONING:                                                 â”‚
â”‚     - Analyzes input length                                          â”‚
â”‚     - Decides which tools to use                                     â”‚
â”‚     - Calls tools in optimal order                                   â”‚
â”‚     - Combines results                                               â”‚
â”‚     - Returns formatted output                                       â”‚
â”‚                                                                       â”‚
â”‚  5. RETURN TO LANGGRAPH:                                             â”‚
â”‚     - Formatted response replaces raw output                         â”‚
â”‚     - Continues to streaming step                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tool Invocation Flow

## ğŸ”Œ MCP (Model Context Protocol) Integration

### What is MCP?

**MCP (Model Context Protocol)** is a standardized protocol developed by Anthropic that allows AI applications to connect to external data sources and tools. Think of it as a universal adapter that lets Claude (and other AI models) interact with your custom tools, databases, and APIs in a structured way.

### MCP in Action

Here's a real example of Claude Desktop using the HRNexus MCP server to query employee skills:

![HRNexus MCP Integration with Claude Desktop](image.png)

*Claude Desktop successfully connects to HRNexus MCP server and retrieves all employee skills data, demonstrating the seamless integration between AI assistants and custom business tools.*

### HRNexus MCP Server

HR Nexus implements a custom MCP server (`backend/core/mcp.py`) that exposes all the system's capabilities through a standardized interface. This allows external AI clients (like Claude Desktop, Cline, or other MCP-compatible tools) to directly access your HR data and workflows.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXTERNAL AI CLIENTS                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Claude    â”‚  â”‚    Cline    â”‚  â”‚   Custom     â”‚  â”‚   Other   â”‚ â”‚
â”‚  â”‚  Desktop    â”‚  â”‚   VS Code   â”‚  â”‚     Apps     â”‚  â”‚  MCP Apps â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MCP PROTOCOL (STDIO/SSE)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HRNEXUS MCP SERVER (FastMCP)                        â”‚
â”‚                         backend/core/mcp.py                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         TOOLS (9 Available)                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ search_employees   â”‚  â”‚ search_projects    â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ search_services    â”‚  â”‚ search_jira_ticketsâ”‚                â”‚  â”‚
â”‚  â”‚  â”‚ search_deployments â”‚  â”‚ search_sprints     â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ search_meetings    â”‚  â”‚ global_web_search  â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ search_for_context â”‚  â”‚ run_chat_pipeline  â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    RESOURCES (4 Available)                       â”‚  â”‚
â”‚  â”‚  â€¢ config://server-info    - Server configuration                â”‚  â”‚
â”‚  â”‚  â€¢ kb://list               - List knowledge base docs            â”‚  â”‚
â”‚  â”‚  â€¢ kb://document/{name}    - Get specific KB document            â”‚  â”‚
â”‚  â”‚  â€¢ dataset://summary       - Dataset statistics                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     PROMPTS (2 Available)                        â”‚  â”‚
â”‚  â”‚  â€¢ format_prompt          - Apply template transformations       â”‚  â”‚
â”‚  â”‚  â€¢ format_search_results  - Format search output                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HRNEXUS BACKEND SERVICES                          â”‚
â”‚  â€¢ Employee Service     â€¢ Project Service      â€¢ JIRA Service         â”‚
â”‚  â€¢ Sprint Service       â€¢ Deployment Service   â€¢ Meeting Service      â”‚
â”‚  â€¢ Tavily Search        â€¢ Chat Pipeline        â€¢ ChromaDB RAG         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MCP Tools Available

#### 1. **Data Search Tools** (7 tools)

These tools allow direct querying of HR data with flexible operators:

```python
# Employee Search
search_employees(key="role", value="Backend Lead", operator="equals")
# Returns: List of employees matching criteria

# Common keys: role, team, skills, location, name, availability,
#              years_of_experience, current_sprint_capacity

# Project Search
search_projects(key="status", value="active", operator="equals")
# Common keys: status, lead, priority, team, tech_stack, progress_percentage

# JIRA Tickets Search
search_jira_tickets(key="assignee", value="Ahmed Ali", operator="equals")
# Common keys: status, assignee, priority, sprint, epic, labels

# Services Search
search_services(key="owner_team", value="Backend", operator="equals")
# Common keys: name, type, owner_team, status, tech_stack, uptime_percentage

# Deployments Search
search_deployments(key="environment", value="production", operator="equals")
# Common keys: service, status, environment, version, deployed_by

# Sprints Search
search_sprints(key="status", value="active", operator="equals")
# Common keys: name, status, team_velocity, total_story_points

# Meetings Search
search_meetings(key="type", value="standup", operator="equals")
# Common keys: type, date, attendees, title
```

**Supported Operators:**
- `equals` - Exact match (default)
- `contains` - Substring match
- `greater_than` / `gt` - Numeric comparison
- `less_than` / `lt` - Numeric comparison
- `greater_equal` / `gte` - Numeric comparison
- `less_equal` / `lte` - Numeric comparison

#### 2. **Web Search Tools** (2 tools)

```python
# Global Web Search (structured results)
global_web_search(
    query="latest HR compliance requirements 2025",
    search_depth="advanced",  # or "basic"
    max_results=5,
    include_domains="shrm.org,hbr.org",  # optional
    exclude_domains="example.com"         # optional
)
# Returns: {success, query, results, answer, images, response_time}

# Search for Context (formatted text)
search_for_context(
    query="what is employee net promoter score",
    search_depth="advanced"
)
# Returns: Formatted text suitable for LLM context
```

#### 3. **Chat Pipeline Tool**

```python
# Execute full HRNexus chat pipeline
run_chat_pipeline(
    query="Who is on the backend team?",
    chat_history=[
        {"role": "user", "content": "Hello"},
        {"role": "assistant", "content": "Hi! How can I help?"}
    ]
)
# Returns: Complete assistant response with intent routing, tools, and RAG
```

### MCP Resources

Resources provide read-only access to system information:

```python
# Server Configuration
config://server-info
# Returns: {version, name, transforms, prompts}

# List Knowledge Base Documents
kb://list
# Returns: ["deployment_process.md", "code_review_policy.md", ...]

# Get Specific KB Document
kb://document/deployment_process.md
# Returns: {name, content}

# Dataset Summary
dataset://summary
# Returns: {employees: 10, projects: 5, jira_tickets: 50, ...}
```

### MCP Prompts

Prompts provide pre-formatted templates for common tasks:

```python
# Format with template
format_prompt(prompt_name="summarize", text="Long text here...")
# Available: summarize, explain, simplify, employee_summary,
#            transform_uppercase, transform_lowercase, transform_reverse

# Format search results
format_search_results(query="backend engineers", results=[...])
# Returns: Formatted readable summary
```

### Running the MCP Server

#### Standalone Mode

```bash
cd backend
python core/mcp.py
```

The server runs in STDIO mode, communicating via standard input/output according to the MCP protocol specification.

#### Configuration for Claude Desktop

Add to `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "hrnexus": {
      "command": "python",
      "args": ["/absolute/path/to/backend/core/mcp.py"],
      "env": {
        "PYTHONPATH": "/absolute/path/to/backend",
        "DATABASE_URL": "your_database_url",
        "OPENAI_API_KEY": "your_openai_key",
        "COHERE_API_KEY": "your_cohere_key",
        "TAVILY_API_KEY": "your_tavily_key"
      }
    }
  }
}
```

#### Configuration for Cline (VS Code)

Add to VS Code settings or Cline configuration:

```json
{
  "cline.mcpServers": {
    "hrnexus": {
      "command": "python",
      "args": ["backend/core/mcp.py"],
      "cwd": "/path/to/HRNexus_AI_assistant"
    }
  }
}
```

### MCP Use Cases



#### 1. **Direct Data Queries via Claude Desktop**

```
User: "Show me all senior backend engineers"

Claude (using MCP):
  â†’ Calls search_employees(key="role", value="Senior", operator="contains")
  â†’ AND search_employees(key="team", value="Backend", operator="equals")
  â†’ Synthesizes natural response with employee details
```

#### 2. **Complex Workflow Automation**

```
User: "Analyze sprint velocity for the last 3 sprints"

Claude (using MCP):
  â†’ Calls search_sprints(key="status", value="completed", operator="equals")
  â†’ Processes sprint data
  â†’ Calculates trends
  â†’ Generates analysis report
```

#### 3. **Real-time Information Integration**

```
User: "What are the latest HR tech trends and how do they apply to our team?"

Claude (using MCP):
  â†’ Calls global_web_search(query="HR technology trends 2025")
  â†’ Calls search_employees(key="team", value="HR", operator="equals")
  â†’ Combines external research with internal team data
  â†’ Provides personalized recommendations
```

#### 4. **Full Chat Pipeline Integration**

```
User: "Run a complete analysis of our backend team"

Claude (using MCP):
  â†’ Calls run_chat_pipeline(query="analyze backend team")
  â†’ HRNexus pipeline handles intent, tools, RAG
  â†’ Returns comprehensive formatted response
```

### MCP Server Features

- **FastMCP Framework**: Built on FastMCP for easy tool/resource/prompt definition
- **Comprehensive Logging**: All tool calls logged to `mcp.log`
- **Error Handling**: Graceful failure with detailed error messages
- **Lazy Loading**: Services imported on-demand to avoid startup delays
- **Type Safety**: Full type hints for all tools and parameters
- **Standardized Protocol**: Compatible with all MCP clients

### Benefits of MCP Integration

1. **Universal Access**: Any MCP-compatible client can use HRNexus tools
2. **No API Development**: No need to build REST APIs for external access
3. **Standardized Interface**: Consistent protocol across different clients
4. **Direct Tool Access**: Skip the web interface, go straight to the data
5. **Composable Workflows**: Combine multiple tools in complex chains
6. **Context Preservation**: Chat history and context maintained across calls
7. **Extensibility**: Easy to add new tools, resources, and prompts

### MCP vs FastAPI Endpoints

| Feature | MCP Server | FastAPI API |
|---------|-----------|-------------|
| **Purpose** | AI client integration | Web application backend |
| **Protocol** | STDIO/SSE (MCP) | HTTP/REST |
| **Clients** | Claude, Cline, MCP tools | Web browsers, mobile apps |
| **Authentication** | Environment-based | JWT tokens |
| **Use Case** | AI-to-tool integration | User-facing application |
| **Streaming** | Native support | SSE for chat |

**Both systems can run simultaneously**, serving different purposes in the ecosystem!

## ğŸ“ Project Structure

```
HRNexus_AI_assistant/
â”œâ”€â”€ UI/                          # Frontend React application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/           # Chat UI components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InputArea.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LeftSidebar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentUpload.tsx  # NEW: Upload modal
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ sections/       # Landing page sections
â”‚   â”‚   â”‚   â””â”€â”€ shared/         # Shared components
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SignupPage.tsx
â”‚   â”‚   â””â”€â”€ services/           # API services
â”‚   â”‚       â”œâ”€â”€ api.config.ts
â”‚   â”‚       â”œâ”€â”€ chat.service.tsx
â”‚   â”‚       â”œâ”€â”€ auth.service.ts
â”‚   â”‚       â””â”€â”€ document.service.ts  # NEW: Document upload
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                     # FastAPI backend
â”‚   â”œâ”€â”€ agents/                 # AI agents
â”‚   â”‚   â”œâ”€â”€ crew_ai.py          # CrewAI agent orchestration
â”‚   â”‚   â”œâ”€â”€ agent_config.yaml   # Agent configurations
â”‚   â”‚   â””â”€â”€ streaming.py        # Streaming support
â”‚   â”œâ”€â”€ core/                   # Core utilities
â”‚   â”‚   â”œâ”€â”€ auth.py             # JWT authentication
â”‚   â”‚   â”œâ”€â”€ config.py           # Configuration
â”‚   â”‚   â”œâ”€â”€ database.py         # Database connection
â”‚   â”‚   â””â”€â”€ mcp.py              # MCP protocol support
â”‚   â”œâ”€â”€ models/                 # SQLAlchemy models
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ company.py
â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”œâ”€â”€ message_feedback.py
â”‚   â”‚   â””â”€â”€ document.py         # NEW: Document metadata
â”‚   â”œâ”€â”€ routers/                # API routes
â”‚   â”‚   â”œâ”€â”€ auth.py             # Auth endpoints
â”‚   â”‚   â”œâ”€â”€ chat.py             # Chat endpoints
â”‚   â”‚   â””â”€â”€ documents.py        # NEW: Document upload API
â”‚   â”œâ”€â”€ services/               # Business logic
â”‚   â”‚   â”œâ”€â”€ chat_pipeline.py    # Main chat pipeline
â”‚   â”‚   â”œâ”€â”€ document_processor.py  # NEW: Document processing
â”‚   â”‚   â”œâ”€â”€ tavily_search_service.py  # Web search
â”‚   â”‚   â””â”€â”€ *Service.py         # Data services
â”‚   â”œâ”€â”€ tools/                  # LangChain tools
â”‚   â”‚   â”œâ”€â”€ format_tool.py
â”‚   â”‚   â””â”€â”€ summary_tool.py
â”‚   â”œâ”€â”€ prompts/                # AI prompts
â”‚   â”‚   â”œâ”€â”€ intent_classification.py
â”‚   â”‚   â”œâ”€â”€ general_conversation.py
â”‚   â”‚   â”œâ”€â”€ data_query.py
â”‚   â”‚   â””â”€â”€ documentation_query.py
â”‚   â”œâ”€â”€ sources/                # Data sources
â”‚   â”‚   â”œâ”€â”€ kb/                 # Knowledge base (markdown)
â”‚   â”‚   â””â”€â”€ Json_files/         # Structured data
â”‚   â”œâ”€â”€ uploads/                # NEW: Uploaded documents
â”‚   â”œâ”€â”€ chroma_db/              # Vector database
â”‚   â”œâ”€â”€ rag_data_loader.py      # RAG data loading
â”‚   â”œâ”€â”€ main.py                 # FastAPI app
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ database/                    # Database schema
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ schema.dbml
â”‚
â””â”€â”€ kb/                         # Knowledge base files
    â”œâ”€â”€ code_review_policy.md
    â”œâ”€â”€ deployment_process.md
    â”œâ”€â”€ dev_env_setup.md
    â”œâ”€â”€ escalation_policy.md
    â”œâ”€â”€ onboarding_guide.md
    â””â”€â”€ team_structure.md
```

## ğŸš€ Getting Started

### Prerequisites

- **Node.js** 18+ and npm
- **Python** 3.10+
- **PostgreSQL** database (Supabase account)
- **API Keys**:
  - OpenAI API key
  - Cohere API key
  - Tavily API key (optional, for web search)

### Backend Setup

1. **Create virtual environment:**
   ```bash
   cd backend
   python -m venv .venv
   source .venv/bin/activate  # On Windows: .venv\Scripts\activate
   ```

2. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

3. **Create `.env` file:**
   ```bash
   # Database
   DATABASE_URL=postgresql://user:password@host:port/database
   
   # JWT
   SECRET_KEY=your-secret-key-here
   ALGORITHM=HS256
   ACCESS_TOKEN_EXPIRE_MINUTES=30
   
   # OpenAI
   OPENAI_API_KEY=your-openai-api-key
   
   # Cohere (for embeddings)
   COHERE_API_KEY=your-cohere-api-key
   
   # Tavily (for web search)
   TAVILY_API_KEY=your-tavily-api-key
   
   # Optional
   UPLOAD_DIR=./uploads
   CHROMA_PERSIST_DIR=./chroma_db
   ```

4. **Initialize the vector database:**
   ```bash
   python rag_data_loader.py
   ```

5. **Run the server:**
   ```bash
   python3 -m uvicorn main:app --reload
   ```

   Backend will be available at `http://localhost:8000`

### Frontend Setup

1. **Install dependencies:**
   ```bash
   cd UI
   npm install
   ```

2. **Create `.env` file (if needed):**
   ```bash
   VITE_API_URL=http://localhost:8000
   ```

3. **Run development server:**
   ```bash
   npm run dev
   ```

   Frontend will be available at `http://localhost:5173`

### Initial Data Setup (Optional)

The system comes with sample data in `backend/sources/Json_files/`:
- `employees.json` - Employee information
- `projects.json` - Project data
- `jira_tickets.json` - Jira tickets
- `meetings.json` - Meeting notes
- `services.json` - Service information
- `deployments.json` - Deployment history
- `sprints.json` - Sprint data

## ğŸ“– Usage

### Basic Workflow

1. **Sign Up / Login**: Create an account or log in
2. **Start Chatting**: Ask questions about company policies, employees, or general topics
3. **Upload Documents**: Add custom documents to expand the knowledge base
4. **Web Search**: Ask questions that require real-time information
5. **Provide Feedback**: Rate responses with ğŸ‘/ğŸ‘

### Example Queries

**HR Policies:**
- "What is our code review policy?"
- "How do I set up my development environment?"
- "What's the escalation process for critical bugs?"

**Employee Information:**
- "Who is on the backend team?"
- "List all senior developers"
- "Show me Sarah Johnson's contact information"

**Project Data:**
- "What projects is John working on?"
- "Show me all active projects"
- "What's the status of the Analytics Platform?"

**Web Search:**
- "What are the latest React 18 features?"
- "Current best practices for API security"
- "Latest news about AI developments"

### Document Upload

1. Click **"Upload Documents"** button in sidebar
2. Drag & drop files or click to browse
3. Supported formats: `.txt`, `.md`, `.json`, `.csv`, `.pdf`
4. Max file size: 10MB per file
5. Files are automatically:
   - Processed and chunked
   - Embedded with Cohere
   - Added to vector database
   - Searchable in chat

## ğŸ”Œ API Documentation

### Authentication Endpoints

- `POST /api/auth/register` - Register new user
- `POST /api/auth/login/json` - Login and get JWT token
- `GET /api/auth/me` - Get current user info

### Chat Endpoints

- `POST /api/chat/` - Create new chat
- `GET /api/chat/` - List user's chats
- `GET /api/chat/{chat_id}` - Get chat details
- `PATCH /api/chat/{chat_id}` - Update chat title
- `DELETE /api/chat/{chat_id}` - Delete chat
- `POST /api/chat/message` - Send message (with streaming)
- `GET /api/chat/{chat_id}/messages` - Get chat messages
- `POST /api/chat/message/{message_id}/feedback` - Rate message

### Document Endpoints (NEW)

- `POST /api/documents/upload` - Upload document
- `GET /api/documents/` - List documents
- `GET /api/documents/{doc_id}` - Get document details
- `DELETE /api/documents/{doc_id}` - Delete document
- `GET /api/documents/stats/vectorstore` - Vector store statistics

### Interactive Documentation

Once the backend is running:
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

## ğŸ¨ Features in Detail

### RAG Pipeline

The RAG (Retrieval-Augmented Generation) system:
1. Embeds user queries using Cohere
2. Searches ChromaDB for relevant context
3. Retrieves top-k most relevant chunks
4. Passes context to LLM for response generation
5. Streams response back to user

### Agentic Workflows

LangGraph orchestrates multi-step reasoning:
1. **Intent Classification** - Determines query type
2. **Tool Selection** - Chooses appropriate data sources
3. **Information Retrieval** - Fetches relevant data
4. **Response Generation** - Synthesizes final answer
5. **Streaming** - Delivers response in real-time

### Document Processing

Uploaded documents go through:
1. **Validation** - File type and size checks
2. **Text Extraction** - Content parsing
3. **Chunking** - Split into optimal sizes (1000 chars)
4. **Embedding** - Generate vector embeddings
5. **Storage** - Save to ChromaDB and PostgreSQL
6. **Indexing** - Make searchable immediately


## ğŸ› ï¸ Development

### Adding New Features

1. **Backend**: Add route in `routers/`, implement in `services/`
2. **Frontend**: Create component in `components/`, add to page
3. **Database**: Update models in `models/`, run migrations
4. **AI**: Modify prompts in `prompts/`, update agents

### Code Style

- **Python**: Follow PEP 8, use type hints
- **TypeScript**: Follow ESLint config
- **Commits**: Conventional commits format

## ğŸ› Troubleshooting

### Common Issues

**Database Connection Error**
- Check DATABASE_URL format
- Verify Supabase database is active
- Ensure connection pooling is configured

**Embedding API Error**
- Verify COHERE_API_KEY is set
- Check API quota/limits
- Ensure network connectivity

**Upload Fails**
- Check file size (max 10MB)
- Verify file type is supported
- Ensure uploads directory exists

**ChromaDB Error**
- Check chroma_db directory permissions
- Verify disk space available
- Try deleting and recreating vector store

## ğŸ“ Documentation

- `CHAT_PIPELINE_WORKFLOW.md` - Chat system architecture
- `TAVILY_INTEGRATION.md` - Web search integration
- `DEPLOYMENT.md` - Deployment guide
- `PROJECT_PRESENTATION.md` - Project overview

## ğŸ¤ Contributing

This is a bootcamp project. For educational purposes only.

## ğŸ“„ License

Educational Use Only - Bootcamp Project

## ğŸ™ Acknowledgments

- **LangChain** for LLM orchestration
- **CrewAI** for agent frameworks
- **Cohere** for embeddings
- **OpenAI** for GPT-4
- **FastAPI** for the amazing backend framework
- **React** for the frontend framework

---

**Built with â¤ï¸ for HR teams everywhere**
